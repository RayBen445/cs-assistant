body {
  font-family: 'Montserrat', Arial, sans-serif;
  margin: 0; padding: 0;
  background: #f4f6fb;
  color: #222;
}
body.dark {
  background: #23272f;
  color: #eaeaea;
}
header.page-header { text-align: center; padding: 1.5em 1em 0.5em 1em; }
input, textarea, button, select { font-family: inherit; }

/* Enhanced Button Base Styles */
button {
  transition: all 0.2s ease;
  border: none;
  cursor: pointer;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5em;
  text-decoration: none;
  user-select: none;
  position: relative;
  overflow: hidden;
}

button:focus {
  outline: 2px solid var(--accent, #0078d4);
  outline-offset: 2px;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

button:not(:disabled):hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
input[type="color"] { cursor: pointer; }
input, textarea { border-radius: 5px; border: 1px solid #bbb; padding: 0.5em; }
input:focus, textarea:focus { outline: 2px solid var(--accent, #0078d4);}
.assistant-dashboard { display: flex; gap: 2em; flex-wrap: wrap; padding: 1em 2em;}
.dashboard-section { flex: 1 1 250px; background: #fff; border-radius: 10px; padding: 1em; margin: 0.5em 0; box-shadow: 0 2px 10px rgba(0,0,0,0.06);}
.dashboard-section h2 { font-size: 1.1em; margin-top: 0;}
#chat-box { height: 320px; overflow-y: auto; background: #fff; border-radius: 10px; margin: 1em 2em; padding: 1em; box-shadow: 0 2px 10px rgba(0,0,0,0.07);}
.user-message, .cs-message {
  display: flex; align-items: flex-start; margin-bottom: 1em;
}
.user-message .avatar, .cs-message .avatar {
  width: 38px; height: 38px; border-radius: 50%; background: #e7eaf3; display: flex; align-items: center; justify-content: center; font-size: 1.7em; margin-right: 12px; position: relative;
}
.cs-message .avatar { background: #ddeeff;}
.bubble {
  background: #e4eaf7; padding: 0.7em 1em; border-radius: 12px; min-width: 40px; max-width: 520px; word-break: break-word; position: relative;
}
.cs-message .bubble { background: #d2f1fd;}
.user-message .bubble { background: #e4eaf7;}
.bot-badge, .user-badge { background: var(--accent,#0078d4); color: #fff; border-radius: 8px; padding: 2px 8px; font-size: 0.7em; margin-left: 8px; vertical-align: middle;}
.message-timestamp { font-size: 0.7em; color: #888; margin-left: 8px;}
.message-actions { margin-top: 3px;}
.message-actions button { 
  border: none; 
  background: transparent; 
  cursor: pointer; 
  font-size: 1em; 
  margin-right: 6px;
  padding: 0.25em 0.5em;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.message-actions button:hover {
  background: rgba(0,120,212,0.1);
  transform: scale(1.05);
}
.attachment { display: block; margin-top: 3px; font-size: 0.9em; }
.quick-replies { margin-top: 7px;}
.quick-replies button { 
  margin-right: 5px; 
  border: none; 
  background: var(--accent,#0078d4); 
  color: #fff; 
  padding: 0.5em 1em; 
  border-radius: 20px; 
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 2px 6px rgba(0,120,212,0.3);
}

.quick-replies button:hover {
  background: #005fa3;
  box-shadow: 0 4px 12px rgba(0,120,212,0.4);
  transform: translateY(-1px);
}
.typing-indicator { margin: 1em auto; text-align: left; color: #4d7acd;}
.typing-indicator .dot { display: inline-block; width:5px; height:5px; margin:0 2px; border-radius:50%; background:#4d7acd; animation: blink 1s infinite alternate;}
@keyframes blink { 0%{opacity:0.33;} 100%{opacity:1;} }
.unread-badge { position:fixed; bottom:90px; right:30px; background:var(--accent,#0078d4); color:#fff; border-radius:12px; padding:6px 18px; cursor:pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.14); z-index:999;}
.input-area { display: flex; align-items: center; gap: 0.6em; background: #fff; border-radius: 10px; box-shadow: 0 1px 6px rgba(0,0,0,0.04); margin: 1em 2em; padding: 0.7em;}
.input-area textarea { flex: 1; resize: none;}
.input-area button { 
  background: var(--accent,#0078d4); 
  color: #fff; 
  border: none; 
  border-radius: 8px; 
  padding: 0.75em 1.25em; 
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0,120,212,0.3);
}

.input-area button:hover {
  background: #005fa3;
  box-shadow: 0 4px 12px rgba(0,120,212,0.4);
  transform: translateY(-1px);
}

.input-area button:active { 
  background: #004080;
  transform: translateY(0px);
}
.controls-area { padding: 0.7em 2em 0.7em 2em; display: flex; align-items: center; gap: 1em; flex-wrap: wrap;}

/* Enhanced Controls Area Button Styles */
.controls-area button {
  background: #fff;
  color: #333;
  border: 2px solid #ddd;
  border-radius: 8px;
  padding: 0.6em 1em;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.controls-area button:hover {
  border-color: var(--accent, #0078d4);
  color: var(--accent, #0078d4);
  background: rgba(0,120,212,0.05);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
}

.controls-area button.active {
  background: var(--accent, #0078d4);
  color: #fff;
  border-color: var(--accent, #0078d4);
}

/* Dark theme styles for controls */
body.dark .controls-area button {
  background: #2a2d34;
  color: #eaeaea;
  border-color: #444;
}

body.dark .controls-area button:hover {
  border-color: var(--accent, #0078d4);
  color: var(--accent, #0078d4);
  background: rgba(0,120,212,0.1);
}
.download-area { text-align: right; margin: 0.8em 2em;}
.download-area button { 
  margin-left: 0.8em;
  background: #28a745;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 0.6em 1.2em;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 6px rgba(40,167,69,0.3);
}

.download-area button:hover {
  background: #218838;
  box-shadow: 0 4px 12px rgba(40,167,69,0.4);
  transform: translateY(-1px);
}
.page-footer { text-align: center; margin-top: 3em; color: #a6a6a6; font-size: 0.99em;}
.emoji-picker { position: absolute; bottom: 75px; right: 20px; background: #fff; border: 1px solid #bbb; border-radius: 10px; z-index: 999; padding: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.16);}
.cs-context-menu {
  position: absolute;
  background: var(--bubble-bg, #fff);
  border: 1px solid #aaa;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.18);
  z-index: 9999;
  padding: 0.3em 0.6em;
  display: flex;
  flex-direction: column;
  min-width: 90px;
}
.cs-context-menu button {
  background: transparent;
  border: none;
  padding: 0.6em 0.8em;
  text-align: left;
  font: inherit;
  cursor: pointer;
  width: 100%;
  border-radius: 4px;
  transition: all 0.2s ease;
  font-weight: 500;
}
.cs-context-menu button:hover {
  background: var(--accent, #0078d4);
  color: #fff;
  transform: translateX(2px);
}
.modal {
  position: fixed; top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center;
  z-index: 10000;
}
.modal-content {
  background: #fff;
  border-radius: 8px;
  padding: 2em;
  min-width: 300px;
  max-width: 95vw;
  position: relative;
  box-shadow: 0 2px 16px rgba(0,0,0,0.15);
}
.modal .close {
  position: absolute; right: 1em; top: 0.8em;
  font-size: 1.5em; cursor: pointer;
}
.support-channels {
  margin-bottom: 12px;
  text-align: left;
}
.support-channels a img {
  height:32px;
  margin:0 7px 0 0;
  vertical-align:middle;
  filter: grayscale(0.35);
  transition: filter 0.2s;
}
.support-channels a img:hover {
  filter: none;
}
#faq-search {
  width:100%; margin-bottom:8px;
  border-radius:5px; border:1px solid #bbb; padding:0.4em;
}
#faq-list {
  max-height:80px; overflow:auto;
  padding-left:20px; margin-bottom: 1em;
}
#faq-list li { margin-bottom: 0.6em; }
#ticket-history {
  max-height:60px; overflow:auto; font-size:13px; padding-left: 15px; margin: 0;
}
#ticket-history li { margin-bottom: 0.4em;}
@media (max-width: 900px) {
  .assistant-dashboard { flex-direction: column; gap: 1em;}
  .dashboard-section { margin: 0.6em 0;}
  .controls-area, .download-area, .input-area, #chat-box { margin: 1em;}
}
@media (max-width: 600px) {
  .modal-content { padding: 1em; min-width: unset; }
  .assistant-dashboard, .controls-area, .download-area, .input-area { padding: 0.6em;}
  #chat-box { height: 180px;}
}

/* ==========================
   LOGIN & AUTH STYLES
   ========================== */
.login-status {
  margin-top: 1em;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 1em;
  flex-wrap: wrap;
}
.login-toggle-btn {
  background: var(--accent, #0078d4);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 0.6em 1.2em;
  cursor: pointer;
  font-size: 0.9em;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0,120,212,0.3);
}
.login-toggle-btn:hover {
  background: #005fa3;
  box-shadow: 0 4px 12px rgba(0,120,212,0.4);
  transform: translateY(-1px);
}
.login-toggle-btn.logout {
  background: #dc3545;
  box-shadow: 0 2px 8px rgba(220,53,69,0.3);
}
.login-toggle-btn.logout:hover {
  background: #c82333;
  box-shadow: 0 4px 12px rgba(220,53,69,0.4);
}

/* Profile Button */
.profile-btn {
  background: #28a745;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 0.6em 1.2em;
  cursor: pointer;
  font-size: 0.9em;
  font-weight: 500;
  transition: all 0.2s ease;
  margin-right: 0.5em;
  box-shadow: 0 2px 8px rgba(40,167,69,0.3);
}
.profile-btn:hover {
  background: #218838;
  box-shadow: 0 4px 12px rgba(40,167,69,0.4);
  transform: translateY(-1px);
}

#user-greeting {
  font-size: 0.9em;
  color: #666;
}
body.dark #user-greeting {
  color: #ccc;
}

/* Auth Overlay */
.auth-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.auth-message {
  background: #fff;
  border-radius: 12px;
  padding: 2em;
  text-align: center;
  max-width: 400px;
  margin: 1em;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
}
body.dark .auth-message {
  background: #2a2d34;
  color: #eaeaea;
}
.auth-btn {
  background: var(--accent, #0078d4);
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 1em 2em;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: 600;
  margin-top: 1em;
  transition: all 0.2s ease;
  box-shadow: 0 4px 15px rgba(0,120,212,0.3);
}
.auth-btn:hover {
  background: #005fa3;
  box-shadow: 0 6px 20px rgba(0,120,212,0.4);
  transform: translateY(-2px);
}

/* Login Modal Enhancements */
#login-form, #profile-form {
  display: flex;
  flex-direction: column;
  gap: 1em;
}
#login-form label, #profile-form label {
  font-weight: 600;
  margin-bottom: 0.3em;
  display: block;
}
#login-form input, #profile-form input, #profile-form select {
  padding: 0.8em;
  border-radius: 6px;
  border: 2px solid #ddd;
  font-size: 1em;
  transition: border-color 0.2s;
}
#login-form input:focus, #profile-form input:focus, #profile-form select:focus {
  border-color: var(--accent, #0078d4);
  outline: none;
}
.login-btn, .save-profile-btn {
  background: var(--accent, #0078d4);
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 1em 2em;
  cursor: pointer;
  font-size: 1em;
  font-weight: 600;
  margin-top: 0.5em;
  transition: all 0.2s ease;
  box-shadow: 0 3px 10px rgba(0,120,212,0.3);
}
.login-btn:hover, .save-profile-btn:hover {
  background: #005fa3;
  box-shadow: 0 5px 15px rgba(0,120,212,0.4);
  transform: translateY(-1px);
}

/* Profile Modal Specific Styles */
.profile-section {
  margin-bottom: 1.5em;
  padding-bottom: 1em;
  border-bottom: 1px solid #eee;
}
.profile-section:last-of-type {
  border-bottom: none;
}
.profile-section h3 {
  margin: 0 0 1em 0;
  color: var(--accent, #0078d4);
  font-size: 1.1em;
}
.profile-actions {
  display: flex;
  gap: 1em;
  margin-top: 1.5em;
}
.cancel-profile-btn {
  background: #6c757d;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 1em 2em;
  cursor: pointer;
  font-size: 1em;
  font-weight: 500;
  transition: all 0.2s ease;
  box-shadow: 0 3px 10px rgba(108,117,125,0.3);
}
.cancel-profile-btn:hover {
  background: #5a6268;
  box-shadow: 0 5px 15px rgba(108,117,125,0.4);
  transform: translateY(-1px);
}
.profile-info {
  margin-top: 2em;
  padding-top: 1.5em;
  border-top: 2px solid #eee;
  font-size: 0.9em;
}
.profile-info h3 {
  margin: 0 0 0.8em 0;
  color: #666;
}
.profile-info p {
  margin: 0.4em 0;
  color: #777;
}

/* Dark mode profile modal */
body.dark .profile-section {
  border-bottom-color: #444;
}
body.dark .profile-section h3 {
  color: #66b3ff;
}
body.dark .profile-info {
  border-top-color: #444;
}
body.dark .profile-info h3 {
  color: #aaa;
}
body.dark .profile-info p {
  color: #bbb;
}

/* Dashboard section improvements */
.dashboard-section.disabled {
  opacity: 0.5;
  pointer-events: none;
}
.dashboard-section.disabled::after {
  content: "🔒 Sign in to use this feature";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(255, 255, 255, 0.9);
  padding: 1em;
  border-radius: 8px;
  font-size: 0.9em;
  text-align: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
body.dark .dashboard-section.disabled::after {
  background: rgba(42, 45, 52, 0.9);
  color: #eaeaea;
}

@media (max-width: 600px) {
  .login-status {
    flex-direction: column;
    gap: 0.5em;
  }
  .auth-message {
    padding: 1.5em;
  }
}
