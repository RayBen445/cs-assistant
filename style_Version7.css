body {
  font-family: 'Montserrat', Arial, sans-serif;
  margin: 0; padding: 0;
  background: #f4f6fb;
  color: #222;
}
body.dark {
  background: #23272f;
  color: #eaeaea;
}
header.page-header { text-align: center; padding: 1.5em 1em 0.5em 1em; }
input, textarea, button, select { font-family: inherit; }
input[type="color"] { cursor: pointer; }
input, textarea { border-radius: 5px; border: 1px solid #bbb; padding: 0.5em; }
input:focus, textarea:focus { outline: 2px solid var(--accent, #0078d4);}
.assistant-dashboard { display: flex; gap: 2em; flex-wrap: wrap; padding: 1em 2em;}
.dashboard-section { flex: 1 1 250px; background: #fff; border-radius: 10px; padding: 1em; margin: 0.5em 0; box-shadow: 0 2px 10px rgba(0,0,0,0.06);}
.dashboard-section h2 { font-size: 1.1em; margin-top: 0;}
#chat-box { height: 320px; overflow-y: auto; background: #fff; border-radius: 10px; margin: 1em 2em; padding: 1em; box-shadow: 0 2px 10px rgba(0,0,0,0.07);}
.user-message, .cs-message {
  display: flex; align-items: flex-start; margin-bottom: 1em;
}
.user-message .avatar, .cs-message .avatar {
  width: 38px; height: 38px; border-radius: 50%; background: #e7eaf3; display: flex; align-items: center; justify-content: center; font-size: 1.7em; margin-right: 12px; position: relative;
}
.cs-message .avatar { background: #ddeeff;}
.bubble {
  background: #e4eaf7; padding: 0.7em 1em; border-radius: 12px; min-width: 40px; max-width: 520px; word-break: break-word; position: relative;
}
.cs-message .bubble { background: #d2f1fd;}
.user-message .bubble { background: #e4eaf7;}
.bot-badge, .user-badge { background: var(--accent,#0078d4); color: #fff; border-radius: 8px; padding: 2px 8px; font-size: 0.7em; margin-left: 8px; vertical-align: middle;}
.message-timestamp { font-size: 0.7em; color: #888; margin-left: 8px;}
.message-actions { margin-top: 3px;}
.message-actions button { border:none; background:none; cursor:pointer; font-size:1em; margin-right:6px;}
.attachment { display: block; margin-top: 3px; font-size: 0.9em; }
.quick-replies { margin-top: 7px;}
.quick-replies button { margin-right: 5px; border: none; background: var(--accent,#0078d4); color: #fff; padding: 3px 11px; border-radius: 7px; cursor: pointer;}
.typing-indicator { margin: 1em auto; text-align: left; color: #4d7acd;}
.typing-indicator .dot { display: inline-block; width:5px; height:5px; margin:0 2px; border-radius:50%; background:#4d7acd; animation: blink 1s infinite alternate;}
@keyframes blink { 0%{opacity:0.33;} 100%{opacity:1;} }
.unread-badge { position:fixed; bottom:90px; right:30px; background:var(--accent,#0078d4); color:#fff; border-radius:12px; padding:6px 18px; cursor:pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.14); z-index:999;}
.input-area { display: flex; align-items: center; gap: 0.6em; background: #fff; border-radius: 10px; box-shadow: 0 1px 6px rgba(0,0,0,0.04); margin: 1em 2em; padding: 0.7em;}
.input-area textarea { flex: 1; resize: none;}
.input-area button { background: var(--accent,#0078d4); color:#fff; border: none; border-radius: 6px; padding: 6px 13px; cursor: pointer;}
.input-area button:active { background: #005fa3; }
.controls-area { padding: 0.7em 2em 0.7em 2em; display: flex; align-items: center; gap: 1em; flex-wrap: wrap;}
.download-area { text-align: right; margin: 0.8em 2em;}
.download-area button { margin-left: 0.8em;}
.page-footer { text-align: center; margin-top: 3em; color: #a6a6a6; font-size: 0.99em;}
.emoji-picker { position: absolute; bottom: 75px; right: 20px; background: #fff; border: 1px solid #bbb; border-radius: 10px; z-index: 999; padding: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.16);}
.cs-context-menu {
  position: absolute;
  background: var(--bubble-bg, #fff);
  border: 1px solid #aaa;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.18);
  z-index: 9999;
  padding: 0.3em 0.6em;
  display: flex;
  flex-direction: column;
  min-width: 90px;
}
.cs-context-menu button {
  background: none;
  border: none;
  padding: 0.5em;
  text-align: left;
  font: inherit;
  cursor: pointer;
  width: 100%;
}
.cs-context-menu button:hover {
  background: var(--accent, #e0eaff);
}
.modal {
  position: fixed; top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center;
  z-index: 10000;
}
.modal-content {
  background: #fff;
  border-radius: 8px;
  padding: 2em;
  min-width: 300px;
  max-width: 95vw;
  position: relative;
  box-shadow: 0 2px 16px rgba(0,0,0,0.15);
}
.modal .close {
  position: absolute; right: 1em; top: 0.8em;
  font-size: 1.5em; cursor: pointer;
}
.support-channels {
  margin-bottom: 12px;
  text-align: left;
}
.support-channels a img {
  height:32px;
  margin:0 7px 0 0;
  vertical-align:middle;
  filter: grayscale(0.35);
  transition: filter 0.2s;
}
.support-channels a img:hover {
  filter: none;
}
#faq-search {
  width:100%; margin-bottom:8px;
  border-radius:5px; border:1px solid #bbb; padding:0.4em;
}
#faq-list {
  max-height:80px; overflow:auto;
  padding-left:20px; margin-bottom: 1em;
}
#faq-list li { margin-bottom: 0.6em; }
#ticket-history {
  max-height:60px; overflow:auto; font-size:13px; padding-left: 15px; margin: 0;
}
#ticket-history li { margin-bottom: 0.4em;}
@media (max-width: 900px) {
  .assistant-dashboard { flex-direction: column; gap: 1em;}
  .dashboard-section { margin: 0.6em 0;}
  .controls-area, .download-area, .input-area, #chat-box { margin: 1em;}
}
@media (max-width: 600px) {
  .modal-content { padding: 1em; min-width: unset; }
  .assistant-dashboard, .controls-area, .download-area, .input-area { padding: 0.6em;}
  #chat-box { height: 180px;}
}